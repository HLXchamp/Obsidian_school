### 需求分析与设计

![[Pasted image 20240522223447.png|350]]

![[Pasted image 20240522223511.png|475]]

### 代码开发

controller:

```java
@DeleteMapping("/clean")  
@ApiOperation("清空购物车")  
public Result clean(){  
    shoppingCartService.cleanShoppingCart();  
    return Result.success();  
}
```

service：

```java
@Override  
public void cleanShoppingCart() {  
    //获取当前微信用户的id  
    Long userId = BaseContext.getCurrentId();  
    shoppingCartMapper.deleteByUserId(userId);  
}
```

mapper：

```java
/**  
 * 根据userId清空购物车  
 * @param userId  
 */  
@Delete("delete from shopping_cart where user_id = #{userId}")  
void deleteByUserId(Long userId);
```

### 测试

没问题！