![[Pasted image 20240117182746.png]]
![[Pasted image 20240117182758.png|356]]

整体思路和[[长度最小的子数组]]差不多，都要用到滑动窗口的思想（不能直接用哈希，因为这里必须要每棵树都挨着）。

滑动窗口是从 i 到 j 。保证两个篮子还是用的哈希，其中删除多少个元素，开始的 i 就应该移动多少步！

```java
class Solution {
    public int totalFruit(int[] fruits) {
        int i = 0;
        int res = 0;
        Map<Integer, Integer> count = new HashMap<>();
        for(int j = 0; j < fruits.length; j++){
            count.put(fruits[j], count.getOrDefault(fruits[j], 0) + 1);
            while(count.size() > 2){
                count.put(fruits[i], count.get(fruits[i]) - 1);
                if(count.get(fruits[i]) == 0){// 删除多少个元素，i就应该移动多少步
                    count.remove(fruits[i]);
                }
                i++;
            }
            res = Math.max(res, j - i + 1);    
        }
        return res;
    }
}
```
