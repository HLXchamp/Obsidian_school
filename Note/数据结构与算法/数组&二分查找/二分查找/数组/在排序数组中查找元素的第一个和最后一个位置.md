![[Pasted image 20230927193935.png]]

方法一：找到相等的target后用暴力算法while分别计算起始和结尾的值，但它们的时间复杂度最坏情况下为 O(n)，总体时间复杂度为 O(log n + n)，近似为 O(n)，不符题意。

方法二：二分查找

```c
/**
 * Note: The returned array must be malloced, assume caller calls free().
 */
int* searchRange(int* nums, int numsSize, int target, int* returnSize){
    int left = 0;
    int right = numsSize-1;
    int middle = 0;
    int i = -1;
    int j = -1;
    while(left <= right){
        middle = left + (right-left)/2;
        if(nums[middle] == target){
            i = middle - 1;
            j = middle + 1;
            while(i >= 0 && nums[i] == target){
                i--;
            }
            i++;
            while(j < numsSize && nums[j] == target){
                j++;
            }
            j--;
            break;
        }
        else if(nums[middle] < target){ //向左找起始点
            left = middle+1;
        }
        else{ //向右找终止点
            right = middle-1;
        }
    }
    int* result = (int*)malloc(2 * sizeof(int)); //为数组分配内存
    result[0] = i;
    result[1] = j;
    *returnSize = 2; //返回的数组长度
    return result; //返回一个数组
}
```

Java：

```java
class Solution {
    public int[] searchRange(int[] nums, int target) {
        int left = 0;
        int right = nums.length - 1;
        int middle = 0;
        int begin = -1;
        int end = - 1; 
        while(left <= right){ 
            middle = left + (right - left) / 2;
            if(nums[middle] == target){ //找begin和end都是在这个条件成立后
                begin = middle - 1; // 初始化一定要对
                end = middle + 1;
                while(begin >= 0 && nums[begin] == target){ //是>=0
                    begin--;
                }
                begin++; //不加的话答案不对
                while(end < nums.length && nums[end] == target){ //是<nums.length
                    end++;
                }
                end--;
                break;
            }
            else if(nums[middle] < target){
                left = middle + 1;
            }
            else{
                right = middle - 1;
            }
        }
        return new int[]{begin, end}; //新建一个数组
    }
}
```

