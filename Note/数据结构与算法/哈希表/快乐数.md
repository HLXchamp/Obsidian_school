![[Pasted image 20240305104301.png|475]]
![[Pasted image 20240305104315.png|149]]

<font color="#d83931">当我们遇到了要快速判断一个元素是否出现集合里的时候，就要考虑哈希法了！</font>

所以这道题目使用哈希法，来判断这个sum是否重复出现，如果重复了就是return false， 否则一直找到sum为1为止。

第一版代码：

```Java
class Solution {
    public int count(int num){
        int sum = 0;
        while(num >= 1){
            int m = num % 10; //这里一定是num % 10
            sum += m * m;            
            num = num / 10;
        }
        return sum;
    }
    public boolean isHappy(int n) {
        Set<Integer> result = new HashSet<>();
        int temp = count(n);
        while(!result.contains(temp)){
            result.add(temp);
            temp = count(temp);  //这里是对temp做计算
            if(temp == 1){
                return true;
            }
        }
        return false;
    }
}
```

注意事项：
- 求和时`int m = num % 10;` 这里一定是num % 10；
- 计算时`temp = count(temp);`  这里是对temp反复做计算！

比较时代码可以再简化一点，temp其实没必要用：

```java
public boolean isHappy(int n) {
        Set<Integer> result = new HashSet<>();
        while(!result.contains(n)){
            result.add(n);
            n = count(n);  
            if(n == 1){
                return true;
            }
        }
        return false;
    }
```

或者：

```Java
 public boolean isHappy(int n) {
        Set<Integer> result = new HashSet<>();
        while (n != 1 && !result.contains(n)) {
            result.add(n);
            n = count(n);
        }
        return n == 1;
    }
```